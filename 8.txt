//8. ADO.NET connecting to DataSource.

//.aspx

<%@ Page Language="C#" AutoEventWireup="true" CodeFile="DataSource.aspx.cs" Inherits="DataSource" %>

<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title>GridView Example</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 50px;
        }
        .grid-container {
            width: 50%;
            margin: auto;
        }
    </style>
</head>
<body>
    <form id="form1" runat="server">
        <div class="grid-container">
            <asp:GridView ID="g1" runat="server" AutoGenerateColumns="true" 
                GridLines="Both" BorderStyle="Solid" BorderWidth="1px"
                HeaderStyle-BackColor="#4CAF50" HeaderStyle-ForeColor="White">
            </asp:GridView>
        </div>
    </form>
</body>
</html>


//.cs

using System;
using System.Data;
using System.Data.SqlClient;

public partial class DataSource : System.Web.UI.Page
{
    protected void Page_Load(object sender, EventArgs e)
    {
        if (!IsPostBack)
        {
            BindData();
        }
    }

    protected void BindData()
    {
        
        string connectionString = @"Data Source=192.168.X.Y;Initial Catalog=YourDatabaseName;User ID=YourUsername;Password=YourPassword";
        
        try
        {
            using (SqlConnection con = new SqlConnection(connectionString))
            {
                SqlDataAdapter da = new SqlDataAdapter("SELECT * FROM sp", con);
                DataTable dt = new DataTable();
                da.Fill(dt);

                g1.DataSource = dt;
                g1.DataBind();
            }
        }
        catch (Exception ex)
        {
            Response.Write("<h3 style='color:red;'>Error: " + ex.Message + "</h3>");
        }
    }
}


//.designer.cs

//------------------------------------------------------------------------------
// <auto-generated>
//     This code was generated by a tool.
// </auto-generated>
//------------------------------------------------------------------------------

public partial class DataSource
{
    protected global::System.Web.UI.WebControls.GridView g1;
}


//SQL QUERY

USE [YourDatabaseName];

IF OBJECT_ID('sp', 'U') IS NULL
BEGIN
    CREATE TABLE sp (
        ID INT PRIMARY KEY,
        Name NVARCHAR(50),
        Age INT
    );

    INSERT INTO sp (ID, Name, Age) VALUES (1, 'Alice', 23);
    INSERT INTO sp (ID, Name, Age) VALUES (2, 'Bob', 25);
    INSERT INTO sp (ID, Name, Age) VALUES (3, 'Charlie', 30);
END
GO

-- Optional: Verify
SELECT * FROM sp;
GO
